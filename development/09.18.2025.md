# MadLab / Valor-IVX — Default Workflow Scaffold (IDE-style, prompt-first)

## Design principles (first)

- **Flow > Features:** Every screen moves the analyst forward one unambiguous step. Each step has **Inputs → Work → Outputs → “Next”**.
- **Prompt-first, evidence-bound:** A single **Omni-Prompt** (⌘K) works everywhere; responses are **cited** to data objects (filings, models, notes).
- **Progressive disclosure:** Later-stage tools appear once prior stage gates are met (reduces clutter; preserves momentum).
- **Tab-centric workbench:** Everything opens as tabs in the **Center Workbench**; left **Explorer** navigates the research graph; right **Inspector** shows context, audit, and AI tools.
- **Stage gates & audit trail:** Each step ends with a tiny checklist; passing writes a durable **Research Log** entry.
- **Industry-aware:** Switchable valuation workbenches (Industrial / REIT / Bank / Insurance / E\&P).

---

## Default sequential order (what loads first, what comes next)

### 0) **Home / Daily Brief** (first load)

**Goal:** Re-enter context in seconds.
**Inputs:** Your open sessions, watchlists, tasks, alerts.
**UI blocks:**

- **Continue Session** (largest card): last 3 tabs and stage chip (e.g., “Scenarios 60%”).
- **Idea Inbox** (left): captured tickers/notes from web clips, emails, mobile.
- **Holdings & Watchlist Moves** (center): absolute/relative moves, KPI deltas, transcript drops.
- **Tasks & Deadlines** (right): stage-linked tasks (e.g., “Finish EPV adj.”).
  **Primary actions:** **New Idea** • **Open Screener** • **Resume Last**.
  **Stage gate to proceed:** Pick **Resume** or **New Idea**.

---

### 1) **Idea Intake (Triage)**

**Goal:** Convert a spark into a qualified candidate or discard.
**Inputs:** Ticker/theme/source, quick facts.
**Work:** 5-minute **One-Pager** auto-draft + your yes/no on business quality, moat hint, “why now?”, 2–3 disqualifiers.
**Outputs:** **Triage Decision** (Advance / Park / Reject) + Research Log.
**AI modes:** _Summarize 10-K in 5 bullets_, _Explain revenue drivers_, _List 3 contrarian risks_.
**Gate:** Must state a **testable thesis stub** and a **disqualifier check** to advance.

---

### 2) **Universe Screener**

**Goal:** Populate a small, themed candidate set.
**Inputs:** Factors (ROIC, FCF yield, leverage, accruals, growth durability, insider buybacks), geography/sector.
**Work:** Natural-language screener (“show wide-moat small caps with 10y ROIC>12%, net cash, FCF yield>6%”).
**Outputs:** Saved **Screen Run** with snapshots, deltas vs prior runs.
**Gate:** Pick ≤5 tickers to promote to **One-Pager**.

---

### 3) **One-Pager (Quick Look)**

**Goal:** Fast “go deeper?” decision.
**Inputs:** Auto-ingested facts + last 10 years key lines.
**Work:** Quality checks (Piotroski, Beneish, Altman), unit economics sketch, simple EPV rough cut, sanity comps.
**Outputs:** **Go-Deeper** flag + initial **Hypothesis Card**.
**Gate:** Confirm data coverage quality + avoid obvious red flags.

---

### 4) **Company Dossier (Business Model Map)**

**Goal:** Build the mental model.
**Inputs:** Segments, products, customers, competitors, supply chain, moat sources.
**Work:** Canvas with blocks (Segments → Drivers → KPIs → Moat → Risks → Catalysts).
**Outputs:** **Business Map v1** + Evidence links (filings, transcripts, expert notes).
**Gate:** Fill all required blocks (even “unknown”) + attach ≥5 primary citations.

---

### 5) **Data Ingestion & Normalization**

**Goal:** Make numbers trustworthy and comparable.
**Inputs:** 10-Ks/10-Qs/IFRS, supplemental tables, price series, alt-data feeds.
**Work:** Mapping to canonical schema; **Adjustments Panel** (capitalize R\&D, operating leases, stock-based comp, non-recurring).
**Outputs:** **Cleaned Financials** versions (GAAP, Owner Earnings).
**Gate:** Pass automated **Reconciliation & Footnote Coverage** checks.

---

### 6) **Financials Workbench (Owner-Earnings Build)**

**Goal:** Derive investable cash economics.
**Inputs:** Normalized statements.
**Work:** Owner-earnings bridge, reinvestment needs, maintenance capex, working capital cycles.
**Outputs:** **Owner Earnings Timeline** + explainers.
**Gate:** Reviewer check: “Do numbers tell the same story as the business map?”

---

### 7) **Valuation Workbench (EPV → DCF → Alt)**

**Goal:** Compute value under multiple lenses.
**Inputs:** Owner earnings, steady-state margins, competitive dynamics.
**Work:**

- **EPV** (Greenwald) baseline with competitive fade.
- **DCF** with scenario envelopes (bull/base/bear).
- **Relatives** (comps, historical bands).
- **Specialized:** REIT NAV, Bank/Ins capital model, Insurance RBC, E\&P PV-10.
  **Outputs:** **Value Range** + **Drivers Tornado**.
  **Gate:** Margin-of-Safety rule applied; assumptions tagged to evidence.

---

### 8) **Scenario & Stress Lab**

**Goal:** Understand sensitivity and ruin risks.
**Inputs:** Valuation models.
**Work:** Monte Carlo on key drivers; regime shifts; downside floors; path-dependency.
**Outputs:** **Distribution view**, **Key Drivers Ranking**, **Sufficiency Heatmap**.
**Gate:** Document **Variant Perception** (what you believe differently).

---

### 9) **Risk Register & Catalysts**

**Goal:** Make uncertainty explicit; plan updates.
**Inputs:** Dossier risks, scenario tails.
**Work:** Likelihood×Impact grid; mitigation notes; **Catalyst Calendar** with expected data points.
**Outputs:** **Top 5 Risks**, **Catalyst Plan**.
**Gate:** Assign owners & alert rules.

---

### 10) **Quality & Governance Checks**

**Goal:** Trust but verify.
**Inputs:** Insider comp/ownership, capital allocation record, board quality, accounting flags.
**Work:** Scorecards (Graham & Dodd, Fisher 15, capital allocation rubric), governance red flags.
**Outputs:** **Quality Score** with rationale.
**Gate:** Any hard fails must be waived with justification.

---

### 11) **Portfolio Fit & Sizing**

**Goal:** Decide if and how it fits.
**Inputs:** Portfolio exposures, liquidity, drawdown rules.
**Work:** Position sizing (Kelly-capped), correlation & factor mix, liquidity stress, risk budget impact.
**Outputs:** **Sizing Proposal** + **Stop/Review Triggers**.
**Gate:** Risk lead sign-off (or solo confirmation for single-user).

---

### 12) **IC-Style Memo Draft (Auto + Edit)**

**Goal:** Synthesize into a decision-grade memo.
**Inputs:** All prior outputs.
**Work:** Auto-draft; you edit; exhibits auto-pulled; citations embedded.
**Outputs:** **IC Memo v1** (PDF/HTML) + **One-slide Summary**.
**Gate:** Peer/AI red-team: _steelman the short_, _attack assumptions_, _find missing comps_.

---

### 13) **Execution Planner**

**Goal:** Translate thesis into orders and alerts.
**Inputs:** Sizing, liquidity, catalysts.
**Work:** Entry plan (staggered, VWAP, limit bands), alert thresholds, pre-mortem.
**Outputs:** **Execution Checklist** + live alerts.
**Gate:** Confirm alerting and monitoring hooks.

---

### 14) **Monitoring & Post-Mortem**

**Goal:** Track thesis drift; learn.
**Inputs:** KPIs, catalysts, news, price action.
**Work:** Auto “thesis delta” diffs; quarterly update workflow; **Decision Journal** for adds/trims/exits; post-mortem after exit.
**Outputs:** **Thesis Health** score; **Lessons Library** feeding future priors.

---

## Default app layout (IDE anatomy)

- **Persistent top bar:** Breadcrumb (Stage ▸ Company ▸ Artifact), **Omni-Prompt (⌘K)**, stage progress chip, “Next →” button.
- **Left “Explorer” pane:**
  - **Pipeline:** Intake ▸ Triage ▸ Research ▸ Modeling ▸ IC ▸ Execution ▸ Monitoring
  - **Objects:** Ideas, Companies, Models, Scenarios, Memos, Tasks.
  - **Saved Views:** Screens, Watchlists, Portfolios.

- **Center “Workbench” tabs:** One-Pager, Dossier, Financials, Valuation, Scenarios, Memo, etc. (multi-tab; drag-reorder; split-view).
- **Right “Inspector” pane (context-aware):**
  - **AI Pair Analyst** (modes: _Explain_, _Verify_, _Challenge_, _Draft_).
  - **Evidence & Citations** (hover → opens source).
  - **Properties** (object metadata), **Adjustments**, **Audit Trail**.

- **Bottom “Console & Tasks”:** Prompt history, task list, alerts log.

**Keyboard core:**

- ⌘K Open Omni-Prompt • ⌘P Open Object • ⌘J Next Stage • ⌘/ Toggle Inspector • ⌘⇧S Snapshot/Log.

---

## Primary navigation (ordered)

1. **Home / Daily Brief**
2. **Idea Intake**
3. **Screener**
4. **One-Pager**
5. **Dossier**
6. **Data & Adjustments**
7. **Financials (Owner-Earnings)**
8. **Valuation**
9. **Scenario & Stress**
10. **Risk & Catalysts**
11. **Quality & Governance**
12. **Portfolio Fit**
13. **IC Memo**
14. **Execution**
15. **Monitoring & Journal**

(Items 6–12 auto-reveal once earlier gates are satisfied; everything is still searchable via ⌘P.)

---

## Page-level feature maps (what sits where)

### One-Pager

- **Left:** Snapshot metrics, business gist, quick flags.
- **Center:** 10-year mini-statements + sparkline charts.
- **Right Inspector:** Sources panel, AI “Should I dig deeper? why/why not?”.
- **Footer:** “Promote to Dossier” gate checklist.

### Dossier

- **Left:** Segment tree & competitors.
- **Center:** Canvas blocks (drag-to-connect), KPI slots.
- **Right:** Evidence panel (attach excerpts); AI “compose business narrative”.

### Data & Adjustments

- **Left:** Source list (filings, datafeeds).
- **Center:** Mapping grid + adjustments with line-item explanations.
- **Right:** Reconciliation tests, footnote coverage meter.

### Valuation

- **Left:** Method selector (EPV, DCF, Relatives, Special).
- **Center:** Assumption inputs and charts; versioning timeline.
- **Right:** Drivers inspector, citations, assumption diffs.

### Scenario & Stress

- **Left:** Parameter library.
- **Center:** Distribution, fan charts, tornado plot.
- **Right:** Narrative “what would make us wrong?” and auto-generated test list.

### IC Memo

- **Left:** Outline & sections.
- **Center:** Editor with live exhibits.
- **Right:** Red-team chat, comment threads, sign-off checklist.

### Monitoring

- **Left:** KPIs & catalysts calendar.
- **Center:** Thesis-delta diff view; decision journal entries.
- **Right:** Alert rules; health score rationale.

---

## Industry-specific workbenches (select in Valuation)

- **REIT / Real Assets:** NAV, cap rates, LTV, AFFO; lease roll-off schedule.
- **Banks:** NIM drivers, NCOs, CECL, CET1, LCR, stress.
- **Insurance:** Combined ratio, RBC, float economics, reserve triangles.
- **E\&P / Mining:** PV-10, reserve life index, realized prices, lifting costs.
- **Software / Subscriptions:** Net retention, CAC payback, cohort EPV.

---

## Evidence, provenance, and trust

- Every numeric input has a **provenance crumb** (click → source, page, timestamp).
- **Assumption cards** show last-edited, by whom/what (you vs AI), with diff history.
- **Red-team mode** forces contradiction search before IC sign-off.

---

## Example session (ticker-first)

1. **Home** → Resume or “New Idea: TKR”.
2. **Intake** → Thesis stub + 2 disqualifiers.
3. **One-Pager** → Pass quick flags → **Promote**.
4. **Dossier** → Fill segments, KPIs, moat links.
5. **Data & Adjustments** → Normalize; pass reconciliation.
6. **Financials** → Owner-earnings bridge.
7. **Valuation** → EPV baseline; DCF cross-check; comps sanity.
8. **Scenarios** → Monte Carlo; identify 3 drivers.
9. **Risk & Catalysts** → Plan quarterly checks.
10. **Quality & Gov** → Scorecards complete.
11. **Portfolio Fit** → 3.0% starter, liquidity OK.
12. **IC Memo** → Auto-draft + red-team.
13. **Execution** → Limit ladder + alerts.
14. **Monitoring** → Thesis-delta dashboard live.

---

## MVP build roadmap (lean)

- **Sprint 1:** Home, Intake, One-Pager, Omni-Prompt, Explorer/Workbench/Inspector shell, Research Log.
- **Sprint 2:** Dossier canvas, Data mapping & Adjustments, provenance crumbs.
- **Sprint 3:** Financials (Owner-Earnings), EPV, simple Scenarios, stage gates.
- **Sprint 4:** IC Memo generator, Portfolio Fit, Execution checklist, Monitoring.
- **Sprint 5:** Industry workbenches, red-team mode, factor-aware Screener v2.

---

## What this ordering buys you

- **Low friction** on entry (Home → Intake), **early kill-switch** (One-Pager), **truth-first math** (Adjustments before valuation), **decision-grade synthesis** (Memo) and **learning loop** (Monitoring → Lessons), all in a single tabbed IDE with a single prompt surface.

---

### Optional next step

I can translate this scaffold into wireframes (tri-pane IDE with real component layout, shortcut map, and stage-gate checklists) or generate a clickable HTML prototype that matches your MadLab aesthetic.
